<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Scratch Card UMD Demo</title>
    <link rel="stylesheet" href="../../dist-umd/gamification.css" />
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; padding: 24px; background:#f7f7fb; }
      .card { max-width: 900px; margin: 0 auto; background: white; border-radius: 16px; padding: 24px; box-shadow: 0 10px 30px rgba(0,0,0,.08); }
      #app { margin-top: 16px; }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Scratch Card (UMD)</h1>
      <p>This page loads the UMD bundle and renders the Scratch Card game into the container below.</p>
      <div id="app"></div>
    </div>

    <!-- React + ReactDOM from CDN (globals React, ReactDOM) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- UMD bundle from dist-umd -->
    <script src="../../dist-umd/gamification.umd.js"></script>
    <script>
      (function() {
        const container = document.getElementById('app');
        const prize = undefined; // or { text, value, color, icon }

        // Debug: list available exports on the UMD global
        console.log('window.Gamification:', window.Gamification);
        console.log('Direct Gamification global:', typeof Gamification !== 'undefined' ? Gamification : 'undefined');

        // UMD should expose functions directly on the global
        if (typeof Gamification !== 'undefined' && Gamification.renderFloatingScratchCard) {
          console.log('Using direct Gamification.renderFloatingScratchCard');
          Gamification.renderFloatingScratchCard(container, { prize });
        } else if (typeof Gamification !== 'undefined' && Gamification.renderScratchCard) {
          console.log('Using direct Gamification.renderScratchCard');
          Gamification.renderScratchCard(container, { prize });
        } else if (window.Gamification && window.Gamification.renderFloatingScratchCard) {
          console.log('Using window.Gamification.renderFloatingScratchCard');
          window.Gamification.renderFloatingScratchCard(container, { prize });
        } else if (window.Gamification && window.Gamification.renderScratchCard) {
          console.log('Using window.Gamification.renderScratchCard');
          window.Gamification.renderScratchCard(container, { prize });
        } else {
          console.error('No gamification functions found');
          console.log('Available globals:', {
            Gamification: typeof Gamification !== 'undefined' ? Object.keys(Gamification) : 'undefined',
            windowGamification: window.Gamification ? Object.keys(window.Gamification) : 'undefined'
          });
        }
      })();
    </script>
  </body>
</html>
